(self.webpackChunkmy_project=self.webpackChunkmy_project||[]).push([[8853],{56257:(h,v,t)=>{"use strict";t.r(v),t.d(v,{default:()=>Vt});var e=t(67294),i=t(16550),r=t(86597),l=t(31498),c=t(81912),A=t(14087),E=t(17034),x=t(185),P=t(53979),O=t(29728),B=t(36989),L=t(49066),D=t(38939),m=t(8060),M=t(79031),R=t(37909),g=t(75515),N=t(63237),Z=t(96315),S=t(86896),F=t(88767),w=t(87462),Q=t(76826),z=t.n(Q),$={CASE_SENSITIVE_EQUAL:9,EQUAL:8,STARTS_WITH:7,WORD_STARTS_WITH:6,STRING_CASE:5,STRING_CASE_ACRONYM:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0},W={CAMEL:.8,PASCAL:.6,KEBAB:.4,SNAKE:.2,NO_CASE:0};q.rankings=$,q.caseRankings=W;var ge=function(n,s){return String(n.rankedItem).localeCompare(s.rankedItem)};function q(n,s,a){a===void 0&&(a={});var o=a,u=o.keys,d=o.threshold,f=d===void 0?$.MATCHES:d,y=o.baseSort,C=y===void 0?ge:y,T=n.reduce(I,[]);return T.sort(function(b,p){return oe(b,p,C)}).map(function(b){var p=b.item;return p});function I(b,p,k){var U=pe(p,u,s,a),j=U.rankedItem,G=U.rank,V=U.keyIndex,Y=U.keyThreshold,ue=Y===void 0?f:Y;return G>=ue&&b.push({rankedItem:j,item:p,rank:G,index:k,keyIndex:V}),b}}function pe(n,s,a,o){if(!s)return{rankedItem:n,rank:J(n,a,o),keyIndex:-1,keyThreshold:o.threshold};var u=We(n,s);return u.reduce(function(d,f,y){var C=d.rank,T=d.rankedItem,I=d.keyIndex,b=d.keyThreshold,p=f.itemValue,k=f.attributes,U=J(p,a,o),j=T,G=k.minRanking,V=k.maxRanking,Y=k.threshold;return U<G&&U>=$.MATCHES?U=G:U>V&&(U=V),U>C&&(C=U,I=y,b=Y,j=p),{rankedItem:j,rank:C,keyIndex:I,keyThreshold:b}},{rank:$.NO_MATCH,keyIndex:-1,keyThreshold:o.threshold})}function J(n,s,a){if(n=se(n,a),s=se(s,a),s.length>n.length)return $.NO_MATCH;if(n===s)return $.CASE_SENSITIVE_EQUAL;var o=Ee(n),u=he(n,s,o),d=fe(n,s,o);return n=n.toLowerCase(),s=s.toLowerCase(),n===s?$.EQUAL+o:n.indexOf(s)===0?$.STARTS_WITH+o:n.indexOf(" "+s)!==-1?$.WORD_STARTS_WITH+o:u?$.STRING_CASE+o:o>0&&d?$.STRING_CASE_ACRONYM+o:n.indexOf(s)!==-1?$.CONTAINS+o:s.length===1?$.NO_MATCH:ae(n).indexOf(s)!==-1?$.ACRONYM+o:ve(n,s)}function ae(n){var s="",a=n.split(" ");return a.forEach(function(o){var u=o.split("-");u.forEach(function(d){s+=d.substr(0,1)})}),s}function Ee(n){var s=n.toLowerCase()!==n,a=n.indexOf("-")>=0,o=n.indexOf("_")>=0;if(!s&&!o&&a)return W.KEBAB;if(!s&&o&&!a)return W.SNAKE;if(s&&!a&&!o){var u=n[0].toUpperCase()===n[0];return u?W.PASCAL:W.CAMEL}return W.NO_CASE}function he(n,s,a){var o=n.toLowerCase().indexOf(s.toLowerCase());switch(a){case W.SNAKE:return n[o-1]==="_";case W.KEBAB:return n[o-1]==="-";case W.PASCAL:case W.CAMEL:return o!==-1&&n[o]===n[o].toUpperCase();default:return!1}}function fe(n,s,a){var o=null;switch(a){case W.SNAKE:o="_";break;case W.KEBAB:o="-";break;case W.PASCAL:case W.CAMEL:o=/(?=[A-Z])/;break;default:o=null}var u=n.split(o);return s.toLowerCase().split("").reduce(function(d,f,y){var C=u[y];return d&&C&&C[0].toLowerCase()===f},!0)}function ve(n,s){var a=0,o=0;function u(b,p,k){for(var U=k;U<p.length;U++){var j=p[U];if(j===b)return a+=1,U+1}return-1}function d(b){var p=a/s.length,k=$.MATCHES+p*(1/b);return k}var f=u(s[0],n,0);if(f<0)return $.NO_MATCH;o=f;for(var y=1;y<s.length;y++){var C=s[y];o=u(C,n,o);var T=o>-1;if(!T)return $.NO_MATCH}var I=o-f;return d(I)}function oe(n,s,a){var o=-1,u=1,d=n.rank,f=n.keyIndex,y=s.rank,C=s.keyIndex;return d===y?f===C?a(n,s):f<C?o:u:d>y?o:u}function se(n,s){var a=s.keepDiacritics;return n=""+n,a||(n=z()(n)),n}function ie(n,s){typeof s=="object"&&(s=s.key);var a;return typeof s=="function"?a=s(n):s.indexOf(".")!==-1?a=s.split(".").reduce(function(o,u){return o?o[u]:null},n):a=n[s],a!=null?[].concat(a):null}function We(n,s){return s.reduce(function(a,o){var u=ie(n,o);return u&&u.forEach(function(d){a.push({itemValue:d,attributes:Ge(o)})}),a},[])}function Ge(n){return typeof n=="string"&&(n={key:n}),(0,w.Z)({maxRanking:1/0,minRanking:-1/0},n)}const we=q;var ee=t(89031);const Ke=async(n,s)=>{try{const{get:a}=(0,r.tg)(),{data:o}=await a((0,ee.Gc)("roles"));return s("The roles have loaded successfully"),o}catch{throw n({type:"warning",message:{id:"notification.error"}}),new Error("error")}},Fe=async(n,s)=>{try{const{del:a}=(0,r.tg)();await a(`${(0,ee.Gc)("roles")}/${n}`)}catch{s({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}};var He=t(45697),K=t.n(He),Ve=t(15234),H=t(11047),xe=t(12028),ze=t(4585),Ye=t(20022);const Ae=({sortedRoles:n,canDelete:s,permissions:a,setRoleToDelete:o,onDelete:u})=>{const{formatMessage:d}=(0,S.Z)(),{push:f}=(0,i.k6)(),[y,C]=u,T=p=>s&&!["public","authenticated"].includes(p.type),I=p=>{o(p),C(!y)},b=p=>{f(`/settings/${l.Z}/roles/${p}`)};return e.createElement(Ve.p,null,n?.map(p=>e.createElement(M.Tr,{key:p.name,...(0,r.X7)({fn:()=>b(p.id)})},e.createElement(R.Td,{width:"20%"},e.createElement(g.Z,null,p.name)),e.createElement(R.Td,{width:"50%"},e.createElement(g.Z,null,p.description)),e.createElement(R.Td,{width:"30%"},e.createElement(g.Z,null,`${p.nb_users} ${d({id:"global.users",defaultMessage:"users"}).toLowerCase()}`)),e.createElement(R.Td,null,e.createElement(H.k,{justifyContent:"end",...r.UW},e.createElement(r.jW,{permissions:a.updateRole},e.createElement(xe.h,{onClick:()=>b(p.id),noBorder:!0,icon:e.createElement(ze.Z,null),label:d({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:`${p.name}`})})),T(p)&&e.createElement(r.jW,{permissions:a.deleteRole},e.createElement(xe.h,{onClick:()=>I(p.id),noBorder:!0,icon:e.createElement(Ye.Z,null),label:d({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${p.name}`})})))))))},Qe=Ae;Ae.defaultProps={canDelete:!1},Ae.propTypes={onDelete:K().array.isRequired,permissions:K().object.isRequired,setRoleToDelete:K().func.isRequired,sortedRoles:K().array.isRequired,canDelete:K().bool};const Xe=()=>{const{trackUsage:n}=(0,r.rS)(),{formatMessage:s}=(0,S.Z)(),{push:a}=(0,i.k6)(),o=(0,r.lm)(),{notifyStatus:u}=(0,A.G)(),[{query:d}]=(0,r.Kx)(),f=d?._q||"",[y,C]=(0,e.useState)(!1),[T,I]=(0,e.useState)(!1),[b,p]=(0,e.useState)();(0,r.go)();const k=(0,F.useQueryClient)(),U=(0,e.useMemo)(()=>({create:c.Z.createRole,read:c.Z.readRoles,update:c.Z.updateRole,delete:c.Z.deleteRole}),[]),{isLoading:j,allowedActions:{canRead:G,canDelete:V}}=(0,r.ss)(U),{isLoading:Y,data:{roles:ue},isFetching:zt}=(0,F.useQuery)("get-roles",()=>Ke(o,u),{initialData:{},enabled:G}),je=Y||zt,Yt=()=>{n("willCreateRole"),a(`/settings/${l.Z}/roles/new`)},Qt=()=>{C(!y)},Xt={roles:{id:(0,ee.OB)("Roles.empty"),defaultMessage:"You don't have any roles yet."},search:{id:(0,ee.OB)("Roles.empty.search"),defaultMessage:"No roles match the search."}},Jt=s({id:"global.roles",defaultMessage:"Roles"}),_t=(0,F.useMutation)(sn=>Fe(sn,o),{async onSuccess(){await k.invalidateQueries("get-roles")}}),qt=async()=>{I(!0),await _t.mutateAsync(b),C(!y),I(!1)},me=we(ue||[],f,{keys:["name","description"]}),en=f&&!me.length?"search":"roles",tn=4,nn=(ue?.length||0)+1;return e.createElement(E.A,null,e.createElement(r.SL,{name:Jt}),e.createElement(x.o,{"aria-busy":je},e.createElement(P.T,{title:s({id:"global.roles",defaultMessage:"Roles"}),subtitle:s({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),primaryAction:e.createElement(r.jW,{permissions:c.Z.createRole},e.createElement(O.z,{onClick:Yt,startIcon:e.createElement(Z.Z,null),size:"S"},s({id:(0,ee.OB)("List.button.roles"),defaultMessage:"Add new role"})))}),e.createElement(B.Z,{startActions:e.createElement(r.m,{label:s({id:"app.component.search.label",defaultMessage:"Search"})})}),e.createElement(L.D,null,!G&&e.createElement(r.ZF,null),(je||j)&&e.createElement(r.dO,null),G&&me&&me?.length?e.createElement(D.i,{colCount:tn,rowCount:nn},e.createElement(m.h,null,e.createElement(M.Tr,null,e.createElement(R.Th,null,e.createElement(g.Z,{variant:"sigma",textColor:"neutral600"},s({id:"global.name",defaultMessage:"Name"}))),e.createElement(R.Th,null,e.createElement(g.Z,{variant:"sigma",textColor:"neutral600"},s({id:"global.description",defaultMessage:"Description"}))),e.createElement(R.Th,null,e.createElement(g.Z,{variant:"sigma",textColor:"neutral600"},s({id:"global.users",defaultMessage:"Users"}))),e.createElement(R.Th,null,e.createElement(N.T,null,s({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(Qe,{sortedRoles:me,canDelete:V,permissions:c.Z,setRoleToDelete:p,onDelete:[y,C]})):e.createElement(r.x7,{content:Xt[en]})),e.createElement(r.QH,{isConfirmButtonLoading:T,onConfirm:qt,onToggleDialog:Qt,isOpen:y})))},Je=()=>e.createElement(r.O4,{permissions:c.Z.accessRoles},e.createElement(Xe,null));var Re=t(94649),X=t(41580),le=t(11276),_=t(74571),Te=t(16364),Pe=t(64256),Me=t(85018),_e=t(67109),te=t(84757),qe=t(27361),re=t.n(qe),et=t(41609),tt=t.n(et),nt=t(82569),st=t.n(nt);const Oe=(0,e.createContext)({}),De=({children:n,value:s})=>e.createElement(Oe.Provider,{value:s},n),ye=()=>(0,e.useContext)(Oe);De.propTypes={children:K().node.isRequired,value:K().object.isRequired};var ce=t(88972),rt=t(35161),at=t.n(rt),ot=t(13217),it=t.n(ot);const lt=n=>{switch(n){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},ct=(0,ce.ZP)(X.x)`
  margin: -1px;
  border-radius: ${({theme:n})=>n.spaces[1]} 0 0 ${({theme:n})=>n.spaces[1]};
`;function Ce({route:n}){const{formatMessage:s}=(0,S.Z)(),{method:a,handler:o,path:u}=n,d=u?it()(u.split("/")):[],[f="",y=""]=o?o.split("."):[],C=lt(n.method);return e.createElement(H.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(g.Z,{variant:"delta",as:"h3"},s({id:"users-permissions.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",e.createElement("span",null,f),e.createElement(g.Z,{variant:"delta",textColor:"primary600"},".",y)),e.createElement(H.k,{hasRadius:!0,background:"neutral0",borderColor:"neutral200",gap:0},e.createElement(ct,{background:C.background,borderColor:C.border,padding:2},e.createElement(g.Z,{fontWeight:"bold",textColor:C.text},a)),e.createElement(X.x,{paddingLeft:2,paddingRight:2},at()(d,T=>e.createElement(g.Z,{key:T,textColor:T.includes(":")?"neutral600":"neutral900"},"/",T)))))}Ce.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},Ce.propTypes={route:K().shape({handler:K().string,method:K().string,path:K().string})};const dt=Ce,ut=()=>{const{formatMessage:n}=(0,S.Z)(),{selectedAction:s,routes:a}=ye(),o=st()(s.split("."),"controllers"),u=re()(a,o[0]),d=o.slice(1).join("."),f=tt()(u)?[]:u.filter(y=>y.handler.endsWith(d));return e.createElement(_.P,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"}},s?e.createElement(H.k,{direction:"column",alignItems:"stretch",gap:2},f.map((y,C)=>e.createElement(dt,{key:C,route:y}))):e.createElement(H.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(g.Z,{variant:"delta",as:"h3"},n({id:"users-permissions.Policies.header.title",defaultMessage:"Advanced settings"})),e.createElement(g.Z,{as:"p",textColor:"neutral600"},n({id:"users-permissions.Policies.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"}))))};var mt=t(48734),gt=t(74756),pt=t(63081),Et=t(11700),ht=t.n(Et);function ft(n){switch(n){case"application":return"Application";case"plugin::content-manager":return"Content manager";case"plugin::content-type-builder":return"Content types builder";case"plugin::documentation":return"Documentation";case"plugin::email":return"Email";case"plugin::i18n":return"i18n";case"plugin::upload":return"Upload";case"plugin::users-permissions":return"Users-permissions";default:return ht()(n.replace("api::","").replace("plugin::",""))}}const vt=ft;var At=t(89734),be=t.n(At),Le=t(36213),yt=t(78114);const Ie=ce.iv`
  background: ${n=>n.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,Ct=(0,ce.ZP)(X.x)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${n=>n.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${n=>n.isActive&&Ie}
  &:hover {
    ${Ie}
  }
`,xt=ce.ZP.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:n})=>n.colors.neutral150};
`,Be=({subCategory:n})=>{const{formatMessage:s}=(0,S.Z)(),{onChange:a,onChangeSelectAll:o,onSelectedAction:u,selectedAction:d,modifiedData:f}=ye(),y=(0,e.useMemo)(()=>re()(f,n.name,{}),[f,n]),C=(0,e.useMemo)(()=>Object.values(y).every(p=>p.enabled===!0),[y]),T=(0,e.useMemo)(()=>Object.values(y).some(p=>p.enabled===!0)&&!C,[y,C]),I=(0,e.useCallback)(({target:{name:p}})=>{o({target:{name:p,value:!C}})},[C,o]),b=(0,e.useCallback)(p=>d===p,[d]);return e.createElement(X.x,null,e.createElement(H.k,{justifyContent:"space-between",alignItems:"center"},e.createElement(X.x,{paddingRight:4},e.createElement(g.Z,{variant:"sigma",textColor:"neutral600"},n.label)),e.createElement(xt,null),e.createElement(X.x,{paddingLeft:4},e.createElement(Le.X,{name:n.name,value:C,onValueChange:p=>I({target:{name:n.name,value:p}}),indeterminate:T},s({id:"app.utils.select-all",defaultMessage:"Select all"})))),e.createElement(H.k,{paddingTop:6,paddingBottom:6},e.createElement(le.r,{gap:2,style:{flex:1}},n.actions.map(p=>{const k=`${p.name}.enabled`;return e.createElement(_.P,{col:6,key:p.name},e.createElement(Ct,{isActive:b(p.name),padding:2,hasRadius:!0},e.createElement(Le.X,{value:re()(f,k,!1),name:k,onValueChange:U=>a({target:{name:k,value:U}})},p.label),e.createElement("button",{type:"button","data-testid":"action-cog",onClick:()=>u(p.name),style:{display:"inline-flex",alignItems:"center"}},e.createElement(yt.Z,null))))}))))};Be.propTypes={subCategory:K().object.isRequired};const Rt=Be,Se=({name:n,permissions:s})=>{const a=(0,e.useMemo)(()=>be()(Object.values(s.controllers).reduce((o,u,d)=>{const f=`${n}.controllers.${Object.keys(s.controllers)[d]}`,y=be()(Object.keys(u).reduce((C,T)=>[...C,{...u[T],label:T,name:`${f}.${T}`}],[]),"label");return[...o,{actions:y,label:Object.keys(s.controllers)[d],name:f}]},[]),"label"),[n,s]);return e.createElement(X.x,{padding:6},a.map(o=>e.createElement(Rt,{key:o.name,subCategory:o})))};Se.propTypes={name:K().string.isRequired,permissions:K().object.isRequired};const Tt=Se,Pt=(n,s)=>{const a=Object.keys(s).sort().map(o=>({name:o,isOpen:!1}));return{...n,collapses:a}};var de=t(18172);const Mt={collapses:[]},Ot=(n,s)=>(0,de.ZP)(n,a=>{switch(s.type){case"TOGGLE_COLLAPSE":{a.collapses=n.collapses.map((o,u)=>u===s.index?{...o,isOpen:!o.isOpen}:{...o,isOpen:!1});break}default:return a}}),Dt=()=>{const{modifiedData:n}=ye(),{formatMessage:s}=(0,S.Z)(),[{collapses:a},o]=(0,e.useReducer)(Ot,Mt,d=>Pt(d,n)),u=d=>o({type:"TOGGLE_COLLAPSE",index:d});return e.createElement(H.k,{direction:"column",alignItems:"stretch",gap:1},a.map((d,f)=>e.createElement(mt.U,{expanded:d.isOpen,onToggle:()=>u(f),key:d.name,variant:f%2===0?"secondary":void 0},e.createElement(gt.B,{title:vt(d.name),description:s({id:"users-permissions.Plugin.permissions.plugins.description",defaultMessage:"Define all allowed actions for the {name} plugin."},{name:d.name}),variant:f%2?"primary":"secondary"}),e.createElement(pt.v,null,e.createElement(X.x,null,e.createElement(Tt,{permissions:n[d.name],name:d.name}))))))};var bt=t(36968),Ue=t.n(bt),Lt=t(69572),It=t.n(Lt);const Bt={initialData:{},modifiedData:{},routes:{},selectedAction:"",policies:[]},St=(n,s)=>(0,de.ZP)(n,a=>{switch(s.type){case"ON_CHANGE":{const o=s.keys.length,u=s.keys[o-1]==="enabled";if(s.value&&u){const d=It()(s.keys,o-1).join(".");a.selectedAction=d}Ue()(a,["modifiedData",...s.keys],s.value);break}case"ON_CHANGE_SELECT_ALL":{const o=["modifiedData",...s.keys],u=re()(n,o,{}),d=Object.keys(u).reduce((f,y)=>(f[y]={...u[y],enabled:s.value},f),{});Ue()(a,o,d);break}case"ON_RESET":{a.modifiedData=n.initialData;break}case"ON_SUBMIT_SUCCEEDED":{a.initialData=n.modifiedData;break}case"SELECT_ACTION":{const{actionToSelect:o}=s;a.selectedAction=o===n.selectedAction?"":o;break}default:return a}}),Ut=(n,s,a)=>({...n,initialData:s,modifiedData:s,routes:a}),Ze=(0,e.forwardRef)(({permissions:n,routes:s},a)=>{const{formatMessage:o}=(0,S.Z)(),[u,d]=(0,e.useReducer)(St,Bt,I=>Ut(I,n,s));(0,e.useImperativeHandle)(a,()=>({getPermissions(){return{permissions:u.modifiedData}},resetForm(){d({type:"ON_RESET"})},setFormAfterSubmit(){d({type:"ON_SUBMIT_SUCCEEDED"})}}));const T={...u,onChange:({target:{name:I,value:b}})=>d({type:"ON_CHANGE",keys:I.split("."),value:b==="empty__string_value"?"":b}),onChangeSelectAll:({target:{name:I,value:b}})=>d({type:"ON_CHANGE_SELECT_ALL",keys:I.split("."),value:b}),onSelectedAction:I=>d({type:"SELECT_ACTION",actionToSelect:I})};return e.createElement(De,{value:T},e.createElement(le.r,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},e.createElement(_.P,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(H.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(H.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(g.Z,{variant:"delta",as:"h2"},o({id:(0,te.Z)("Plugins.header.title"),defaultMessage:"Permissions"})),e.createElement(g.Z,{as:"p",textColor:"neutral600"},o({id:(0,te.Z)("Plugins.header.description"),defaultMessage:"Only actions bound by a route are listed below."}))),e.createElement(Dt,null))),e.createElement(ut,null)))});Ze.propTypes={permissions:K().object.isRequired,routes:K().object.isRequired};const ke=(0,e.memo)(Ze),pn={isLoading:!0,modifiedData:{}},En=(n,s)=>produce(n,a=>{switch(s.type){case"GET_DATA":{a.isLoading=!0,a.modifiedData={};break}case"GET_DATA_SUCCEEDED":{a.isLoading=!1,a.modifiedData=s.data;break}case"GET_DATA_ERROR":{a.isLoading=!0;break}case"ON_SUBMIT_SUCCEEDED":{a.modifiedData=s.data;break}default:return a}}),hn=null,fn=(n,s)=>{const{isLoading:a,allowedActions:o}=useRBAC(s),[{isLoading:u,modifiedData:d},f]=useReducer(reducer,initialState),y=useNotification(),C=useRef(!0),T=new AbortController,{signal:I}=T;useEffect(()=>(a||(async()=>{try{f({type:"GET_DATA"});const k=await request(getRequestURL(n),{method:"GET",signal:I});f({type:"GET_DATA_SUCCEEDED",data:k})}catch(k){C.current&&(f({type:"GET_DATA_ERROR"}),console.error(k),y({type:"warning",message:{id:"notification.error"}}))}})(),()=>{T.abort(),C.current=!1}),[a,n]);const b=useCallback(p=>{f({type:"ON_SUBMIT_SUCCEEDED",data:p})},[]);return{allowedActions:o,dispatchSubmitSucceeded:b,isLoading:u,isLoadingForPermissions:a,modifiedData:d}},vn=null,An={roles:[],isLoading:!0},yn=(n,s)=>produce(n,a=>{switch(s.type){case"GET_DATA":{a.isLoading=!0,a.roles=[];break}case"GET_DATA_SUCCEEDED":{a.roles=s.data,a.isLoading=!1;break}case"GET_DATA_ERROR":{a.isLoading=!1;break}default:return a}}),Cn=null,xn=(n=!0)=>{const[{roles:s,isLoading:a},o]=useReducer(reducer,initialState,()=>init(initialState,n)),u=useNotification(),d=useRef(!0),f=new AbortController,{signal:y}=f;useEffect(()=>(n&&C(),()=>{f.abort(),d.current=!1}),[n]);const C=async()=>{try{o({type:"GET_DATA"});const{roles:T}=await request(`/${pluginId}/roles`,{method:"GET",signal:y});o({type:"GET_DATA_SUCCEEDED",data:T})}catch(T){const I=get(T,["response","payload","message"],"An error occured");d.current&&(o({type:"GET_DATA_ERROR"}),I!=="Forbidden"&&u({type:"warning",message:I}))}};return{roles:s,isLoading:a,getData:C}},Rn=null,Zt=(n,s)=>({...n,isLoading:s}),Ne={permissions:{},routes:{},isLoading:!0},kt=(n,s)=>(0,de.ZP)(n,a=>{switch(s.type){case"GET_DATA":{a.isLoading=!0,a.permissions={},a.routes={};break}case"GET_DATA_SUCCEEDED":{a.permissions=s.permissions,a.routes=s.routes,a.isLoading=!1;break}case"GET_DATA_ERROR":{a.isLoading=!1;break}default:return a}}),$e=(n=!0)=>{const s=(0,r.lm)(),[{permissions:a,routes:o,isLoading:u},d]=(0,e.useReducer)(kt,Ne,()=>Zt(Ne,n)),f=(0,r.kY)(),y=(0,e.useCallback)(async()=>{try{d({type:"GET_DATA"});const[{permissions:C},{routes:T}]=await Promise.all([`/${l.Z}/permissions`,`/${l.Z}/routes`].map(async I=>(await f.get(I)).data));d({type:"GET_DATA_SUCCEEDED",permissions:(0,ee.YX)(C),routes:T})}catch(C){const T=re()(C,["response","payload","message"],"An error occured");d({type:"GET_DATA_ERROR"}),T!=="Forbidden"&&s({type:"warning",message:T})}},[s]);return(0,e.useEffect)(()=>{n&&y()},[y,n]),{permissions:a,routes:o,getData:y,isLoading:u}},Nt={role:{},isLoading:!0},$t=(n,s)=>(0,de.ZP)(n,a=>{switch(s.type){case"GET_DATA_SUCCEEDED":{a.role=s.role,a.isLoading=!1;break}case"GET_DATA_ERROR":{a.isLoading=!1;break}case"ON_SUBMIT_SUCCEEDED":{a.role.name=s.name,a.role.description=s.description;break}default:return a}}),jt=n=>{const[s,a]=(0,e.useReducer)($t,Nt),o=(0,r.lm)(),u=(0,e.useRef)(null),{get:d}=(0,r.kY)();(0,e.useEffect)(()=>(u.current=!0,n?f(n):a({type:"GET_DATA_SUCCEEDED",role:{}}),()=>u.current=!1),[n]);const f=async C=>{try{const{data:{role:T}}=await d(`/${l.Z}/roles/${C}`);u.current&&a({type:"GET_DATA_SUCCEEDED",role:T})}catch(T){console.error(T),a({type:"GET_DATA_ERROR"}),o({type:"warning",message:{id:"notification.error"}})}},y=(0,e.useCallback)(C=>{a({type:"ON_SUBMIT_SUCCEEDED",...C})},[]);return{...s,onSubmitSucceeded:y}};var ne=t(87561);const Wt=ne.Ry().shape({name:ne.Z_().required(r.I0.required),description:ne.Z_().required(r.I0.required)}),Gt=()=>{const{formatMessage:n}=(0,S.Z)(),[s,a]=(0,e.useState)(!1),o=(0,r.lm)(),{lockApp:u,unlockApp:d}=(0,r.o1)(),{params:{id:f}}=(0,i.$B)(`/settings/${l.Z}/roles/:id`),{isLoading:y,routes:C}=$e(),{role:T,onSubmitSucceeded:I,isLoading:b}=jt(f),p=(0,e.useRef)(),{put:k}=(0,r.kY)(),U=async j=>{u(),a(!0);try{const G=p.current.getPermissions();await k(`/${l.Z}/roles/${f}`,{...j,...G,users:[]}),I({name:j.name,description:j.description}),o({type:"success",message:{id:(0,te.Z)("Settings.roles.edited"),defaultMessage:"Role edited"}})}catch(G){console.error(G),o({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}a(!1),d()};return b?e.createElement(r.dO,null):e.createElement(x.o,null,e.createElement(r.SL,{name:"Roles"}),e.createElement(Re.J9,{enableReinitialize:!0,initialValues:{name:T.name,description:T.description},onSubmit:U,validationSchema:Wt},({handleSubmit:j,values:G,handleChange:V,errors:Y})=>e.createElement(r.l0,{noValidate:!0,onSubmit:j},e.createElement(P.T,{primaryAction:!y&&e.createElement(O.z,{disabled:T.code==="strapi-super-admin",type:"submit",loading:s,startIcon:e.createElement(Me.Z,null)},n({id:"global.save",defaultMessage:"Save"})),title:T.name,subtitle:T.description,navigationAction:e.createElement(r.rU,{startIcon:e.createElement(_e.Z,null),to:"/settings/users-permissions/roles"},n({id:"global.back",defaultMessage:"Back"}))}),e.createElement(L.D,null,e.createElement(H.k,{direction:"column",alignItems:"stretch",gap:7},e.createElement(X.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(H.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(g.Z,{variant:"delta",as:"h2"},n({id:(0,te.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),e.createElement(le.r,{gap:4},e.createElement(_.P,{col:6},e.createElement(Te.o,{name:"name",value:G.name||"",onChange:V,label:n({id:"global.name",defaultMessage:"Name"}),error:Y.name?n({id:Y.name,defaultMessage:"Invalid value"}):null})),e.createElement(_.P,{col:6},e.createElement(Pe.g,{name:"description",value:G.description||"",onChange:V,label:n({id:"global.description",defaultMessage:"Description"}),error:Y.description?n({id:Y.description,defaultMessage:"Invalid value"}):null}))))),!y&&e.createElement(ke,{ref:p,permissions:T.permissions,routes:C}))))))},wt=()=>e.createElement(r.O4,{permissions:c.Z.updateRole},e.createElement(Gt,null)),Kt=ne.Ry().shape({name:ne.Z_().required(r.I0.required),description:ne.Z_().required(r.I0.required)}),Ft=()=>{const{formatMessage:n}=(0,S.Z)(),[s,a]=(0,e.useState)(!1),o=(0,r.lm)(),{goBack:u}=(0,i.k6)(),{lockApp:d,unlockApp:f}=(0,r.o1)(),{isLoading:y,permissions:C,routes:T}=$e(),{trackUsage:I}=(0,r.rS)(),b=(0,e.useRef)(),{post:p}=(0,r.kY)(),k=async U=>{d(),a(!0);try{const j=b.current.getPermissions();await p(`/${l.Z}/roles`,{...U,...j,users:[]}),I("didCreateRole"),o({type:"success",message:{id:(0,te.Z)("Settings.roles.created"),defaultMessage:"Role created"}}),u()}catch(j){console.error(j),o({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}a(!1),f()};return e.createElement(x.o,null,e.createElement(r.SL,{name:"Roles"}),e.createElement(Re.J9,{enableReinitialize:!0,initialValues:{name:"",description:""},onSubmit:k,validationSchema:Kt},({handleSubmit:U,values:j,handleChange:G,errors:V})=>e.createElement(r.l0,{noValidate:!0,onSubmit:U},e.createElement(P.T,{primaryAction:!y&&e.createElement(O.z,{type:"submit",loading:s,startIcon:e.createElement(Me.Z,null)},n({id:"global.save",defaultMessage:"Save"})),title:n({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:n({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"})}),e.createElement(L.D,null,e.createElement(H.k,{direction:"column",alignItems:"stretch",gap:7},e.createElement(X.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(H.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(g.Z,{variant:"delta",as:"h2"},n({id:(0,te.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),e.createElement(le.r,{gap:4},e.createElement(_.P,{col:6},e.createElement(Te.o,{name:"name",value:j.name||"",onChange:G,label:n({id:"global.name",defaultMessage:"Name"}),error:V.name?n({id:V.name,defaultMessage:"Invalid value"}):null})),e.createElement(_.P,{col:6},e.createElement(Pe.g,{name:"description",value:j.description||"",onChange:G,label:n({id:"global.description",defaultMessage:"Description"}),error:V.description?n({id:V.description,defaultMessage:"Invalid value"}):null}))))),!y&&e.createElement(ke,{ref:b,permissions:C,routes:T}))))))},Ht=()=>e.createElement(r.O4,{permissions:c.Z.createRole},e.createElement(Ft,null)),Vt=()=>e.createElement(r.O4,{permissions:c.Z.accessRoles},e.createElement(i.rs,null,e.createElement(i.AW,{path:`/settings/${l.Z}/roles/new`,component:Ht,exact:!0}),e.createElement(i.AW,{path:`/settings/${l.Z}/roles/:id`,component:wt,exact:!0}),e.createElement(i.AW,{path:`/settings/${l.Z}/roles`,component:Je,exact:!0}),e.createElement(i.AW,{path:"",component:r.NotFound})))},89031:(h,v,t)=>{"use strict";t.d(v,{YX:()=>l,Gc:()=>E,OB:()=>x.Z});var e=t(41609),i=t.n(e);const l=P=>Object.keys(P).reduce((O,B)=>{const L=P[B].controllers,D=Object.keys(L).reduce((m,M)=>(i()(L[M])||(m[M]=L[M]),m),{});return i()(D)||(O[B]={controllers:D}),O},{});var c=t(31498);const E=P=>`/${c.Z}/${P}`;var x=t(84757)},47443:(h,v,t)=>{var e=t(42118);function i(r,l){var c=r==null?0:r.length;return!!c&&e(r,l,0)>-1}h.exports=i},1196:h=>{function v(t,e,i){for(var r=-1,l=t==null?0:t.length;++r<l;)if(i(e,t[r]))return!0;return!1}h.exports=v},20731:(h,v,t)=>{var e=t(88668),i=t(47443),r=t(1196),l=t(29932),c=t(7518),A=t(74757),E=200;function x(P,O,B,L){var D=-1,m=i,M=!0,R=P.length,g=[],N=O.length;if(!R)return g;B&&(O=l(O,c(B))),L?(m=r,M=!1):O.length>=E&&(m=A,M=!1,O=new e(O));e:for(;++D<R;){var Z=P[D],S=B==null?Z:B(Z);if(Z=L||Z!==0?Z:0,M&&S===S){for(var F=N;F--;)if(O[F]===S)continue e;g.push(Z)}else m(O,S,L)||g.push(Z)}return g}h.exports=x},89881:(h,v,t)=>{var e=t(47816),i=t(99291),r=i(e);h.exports=r},41848:h=>{function v(t,e,i,r){for(var l=t.length,c=i+(r?1:-1);r?c--:++c<l;)if(e(t[c],c,t))return c;return-1}h.exports=v},42118:(h,v,t)=>{var e=t(41848),i=t(62722),r=t(42351);function l(c,A,E){return A===A?r(c,A,E):e(c,i,E)}h.exports=l},62722:h=>{function v(t){return t!==t}h.exports=v},69199:(h,v,t)=>{var e=t(89881),i=t(98612);function r(l,c){var A=-1,E=i(l)?Array(l.length):[];return e(l,function(x,P,O){E[++A]=c(x,P,O)}),E}h.exports=r},82689:(h,v,t)=>{var e=t(29932),i=t(97786),r=t(67206),l=t(69199),c=t(71131),A=t(7518),E=t(85022),x=t(6557),P=t(1469);function O(B,L,D){L.length?L=e(L,function(R){return P(R)?function(g){return i(g,R.length===1?R[0]:R)}:R}):L=[x];var m=-1;L=e(L,A(r));var M=l(B,function(R,g,N){var Z=e(L,function(S){return S(R)});return{criteria:Z,index:++m,value:R}});return c(M,function(R,g){return E(R,g,D)})}h.exports=O},71131:h=>{function v(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}h.exports=v},26393:(h,v,t)=>{var e=t(33448);function i(r,l){if(r!==l){var c=r!==void 0,A=r===null,E=r===r,x=e(r),P=l!==void 0,O=l===null,B=l===l,L=e(l);if(!O&&!L&&!x&&r>l||x&&P&&B&&!O&&!L||A&&P&&B||!c&&B||!E)return 1;if(!A&&!x&&!L&&r<l||L&&c&&E&&!A&&!x||O&&c&&E||!P&&E||!B)return-1}return 0}h.exports=i},85022:(h,v,t)=>{var e=t(26393);function i(r,l,c){for(var A=-1,E=r.criteria,x=l.criteria,P=E.length,O=c.length;++A<P;){var B=e(E[A],x[A]);if(B){if(A>=O)return B;var L=c[A];return B*(L=="desc"?-1:1)}}return r.index-l.index}h.exports=i},99291:(h,v,t)=>{var e=t(98612);function i(r,l){return function(c,A){if(c==null)return c;if(!e(c))return r(c,A);for(var E=c.length,x=l?E:-1,P=Object(c);(l?x--:++x<E)&&A(P[x],x,P)!==!1;);return c}}h.exports=i},42351:h=>{function v(t,e,i){for(var r=i-1,l=t.length;++r<l;)if(t[r]===e)return r;return-1}h.exports=v},35161:(h,v,t)=>{var e=t(29932),i=t(67206),r=t(69199),l=t(1469);function c(A,E){var x=l(A)?e:r;return x(A,i(E,3))}h.exports=c},89734:(h,v,t)=>{var e=t(21078),i=t(82689),r=t(5976),l=t(16612),c=r(function(A,E){if(A==null)return[];var x=E.length;return x>1&&l(A,E[0],E[1])?E=[]:x>2&&l(E[0],E[1],E[2])&&(E=[E[0]]),i(A,e(E,1),[])});h.exports=c},13217:(h,v,t)=>{var e=t(14259);function i(r){var l=r==null?0:r.length;return l?e(r,1,l):[]}h.exports=i},69572:(h,v,t)=>{var e=t(14259),i=t(40554);function r(l,c,A){return l&&l.length?(c=A||c===void 0?1:i(c),e(l,0,c<0?0:c)):[]}h.exports=r},82569:(h,v,t)=>{var e=t(20731),i=t(5976),r=t(29246),l=i(function(c,A){return r(c)?e(c,A):[]});h.exports=l},76826:h=>{var v={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u1EA4:"A",\u1EAE:"A",\u1EB2:"A",\u1EB4:"A",\u1EB6:"A",\u00C6:"AE",\u1EA6:"A",\u1EB0:"A",\u0202:"A",\u00C7:"C",\u1E08:"C",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u1EBE:"E",\u1E16:"E",\u1EC0:"E",\u1E14:"E",\u1E1C:"E",\u0206:"E",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u1E2E:"I",\u020A:"I",\u00D0:"D",\u00D1:"N",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u1ED0:"O",\u1E4C:"O",\u1E52:"O",\u020E:"O",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00DD:"Y",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u1EA5:"a",\u1EAF:"a",\u1EB3:"a",\u1EB5:"a",\u1EB7:"a",\u00E6:"ae",\u1EA7:"a",\u1EB1:"a",\u0203:"a",\u00E7:"c",\u1E09:"c",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u1EBF:"e",\u1E17:"e",\u1EC1:"e",\u1E15:"e",\u1E1D:"e",\u0207:"e",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u1E2F:"i",\u020B:"i",\u00F0:"d",\u00F1:"n",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u1ED1:"o",\u1E4D:"o",\u1E53:"o",\u020F:"o",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00FD:"y",\u00FF:"y",\u0100:"A",\u0101:"a",\u0102:"A",\u0103:"a",\u0104:"A",\u0105:"a",\u0106:"C",\u0107:"c",\u0108:"C",\u0109:"c",\u010A:"C",\u010B:"c",\u010C:"C",\u010D:"c",C\u0306:"C",c\u0306:"c",\u010E:"D",\u010F:"d",\u0110:"D",\u0111:"d",\u0112:"E",\u0113:"e",\u0114:"E",\u0115:"e",\u0116:"E",\u0117:"e",\u0118:"E",\u0119:"e",\u011A:"E",\u011B:"e",\u011C:"G",\u01F4:"G",\u011D:"g",\u01F5:"g",\u011E:"G",\u011F:"g",\u0120:"G",\u0121:"g",\u0122:"G",\u0123:"g",\u0124:"H",\u0125:"h",\u0126:"H",\u0127:"h",\u1E2A:"H",\u1E2B:"h",\u0128:"I",\u0129:"i",\u012A:"I",\u012B:"i",\u012C:"I",\u012D:"i",\u012E:"I",\u012F:"i",\u0130:"I",\u0131:"i",\u0132:"IJ",\u0133:"ij",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u1E30:"K",\u1E31:"k",K\u0306:"K",k\u0306:"k",\u0139:"L",\u013A:"l",\u013B:"L",\u013C:"l",\u013D:"L",\u013E:"l",\u013F:"L",\u0140:"l",\u0141:"l",\u0142:"l",\u1E3E:"M",\u1E3F:"m",M\u0306:"M",m\u0306:"m",\u0143:"N",\u0144:"n",\u0145:"N",\u0146:"n",\u0147:"N",\u0148:"n",\u0149:"n",N\u0306:"N",n\u0306:"n",\u014C:"O",\u014D:"o",\u014E:"O",\u014F:"o",\u0150:"O",\u0151:"o",\u0152:"OE",\u0153:"oe",P\u0306:"P",p\u0306:"p",\u0154:"R",\u0155:"r",\u0156:"R",\u0157:"r",\u0158:"R",\u0159:"r",R\u0306:"R",r\u0306:"r",\u0212:"R",\u0213:"r",\u015A:"S",\u015B:"s",\u015C:"S",\u015D:"s",\u015E:"S",\u0218:"S",\u0219:"s",\u015F:"s",\u0160:"S",\u0161:"s",\u0162:"T",\u0163:"t",\u021B:"t",\u021A:"T",\u0164:"T",\u0165:"t",\u0166:"T",\u0167:"t",T\u0306:"T",t\u0306:"t",\u0168:"U",\u0169:"u",\u016A:"U",\u016B:"u",\u016C:"U",\u016D:"u",\u016E:"U",\u016F:"u",\u0170:"U",\u0171:"u",\u0172:"U",\u0173:"u",\u0216:"U",\u0217:"u",V\u0306:"V",v\u0306:"v",\u0174:"W",\u0175:"w",\u1E82:"W",\u1E83:"w",X\u0306:"X",x\u0306:"x",\u0176:"Y",\u0177:"y",\u0178:"Y",Y\u0306:"Y",y\u0306:"y",\u0179:"Z",\u017A:"z",\u017B:"Z",\u017C:"z",\u017D:"Z",\u017E:"z",\u017F:"s",\u0192:"f",\u01A0:"O",\u01A1:"o",\u01AF:"U",\u01B0:"u",\u01CD:"A",\u01CE:"a",\u01CF:"I",\u01D0:"i",\u01D1:"O",\u01D2:"o",\u01D3:"U",\u01D4:"u",\u01D5:"U",\u01D6:"u",\u01D7:"U",\u01D8:"u",\u01D9:"U",\u01DA:"u",\u01DB:"U",\u01DC:"u",\u1EE8:"U",\u1EE9:"u",\u1E78:"U",\u1E79:"u",\u01FA:"A",\u01FB:"a",\u01FC:"AE",\u01FD:"ae",\u01FE:"O",\u01FF:"o",\u00DE:"TH",\u00FE:"th",\u1E54:"P",\u1E55:"p",\u1E64:"S",\u1E65:"s",X\u0301:"X",x\u0301:"x",\u0403:"\u0413",\u0453:"\u0433",\u040C:"\u041A",\u045C:"\u043A",A\u030B:"A",a\u030B:"a",E\u030B:"E",e\u030B:"e",I\u030B:"I",i\u030B:"i",\u01F8:"N",\u01F9:"n",\u1ED2:"O",\u1ED3:"o",\u1E50:"O",\u1E51:"o",\u1EEA:"U",\u1EEB:"u",\u1E80:"W",\u1E81:"w",\u1EF2:"Y",\u1EF3:"y",\u0200:"A",\u0201:"a",\u0204:"E",\u0205:"e",\u0208:"I",\u0209:"i",\u020C:"O",\u020D:"o",\u0210:"R",\u0211:"r",\u0214:"U",\u0215:"u",B\u030C:"B",b\u030C:"b",\u010C\u0323:"C",\u010D\u0323:"c",\u00CA\u030C:"E",\u00EA\u030C:"e",F\u030C:"F",f\u030C:"f",\u01E6:"G",\u01E7:"g",\u021E:"H",\u021F:"h",J\u030C:"J",\u01F0:"j",\u01E8:"K",\u01E9:"k",M\u030C:"M",m\u030C:"m",P\u030C:"P",p\u030C:"p",Q\u030C:"Q",q\u030C:"q",\u0158\u0329:"R",\u0159\u0329:"r",\u1E66:"S",\u1E67:"s",V\u030C:"V",v\u030C:"v",W\u030C:"W",w\u030C:"w",X\u030C:"X",x\u030C:"x",Y\u030C:"Y",y\u030C:"y",A\u0327:"A",a\u0327:"a",B\u0327:"B",b\u0327:"b",\u1E10:"D",\u1E11:"d",\u0228:"E",\u0229:"e",\u0190\u0327:"E",\u025B\u0327:"e",\u1E28:"H",\u1E29:"h",I\u0327:"I",i\u0327:"i",\u0197\u0327:"I",\u0268\u0327:"i",M\u0327:"M",m\u0327:"m",O\u0327:"O",o\u0327:"o",Q\u0327:"Q",q\u0327:"q",U\u0327:"U",u\u0327:"u",X\u0327:"X",x\u0327:"x",Z\u0327:"Z",z\u0327:"z"},t=Object.keys(v).join("|"),e=new RegExp(t,"g"),i=new RegExp(t,""),r=function(c){return c.replace(e,function(A){return v[A]})},l=function(c){return!!c.match(i)};h.exports=r,h.exports.has=l,h.exports.remove=r},48734:(h,v,t)=>{"use strict";t.d(v,{U:()=>L,y:()=>O});var e=t(85893),i=t(67294),r=t(88972),l=t(13819),c=t(41580),A=t(11047),E=t(2504),x=t(75515);const P=({theme:D,expanded:m,variant:M,disabled:R,error:g})=>g?`1px solid ${D.colors.danger600} !important`:R?`1px solid ${D.colors.neutral150}`:m?`1px solid ${D.colors.primary600}`:M==="primary"?`1px solid ${D.colors.neutral0}`:`1px solid ${D.colors.neutral100}`,O=(0,r.ZP)(x.Z)``,B=(0,r.ZP)(c.x)`
  border: ${P};

  &:hover:not([aria-disabled='true']) {
    border: 1px solid ${({theme:D})=>D.colors.primary600};

    ${O} {
      color: ${({theme:D,expanded:m})=>m?void 0:D.colors.primary700};
    }

    ${x.Z} {
      color: ${({theme:D,expanded:m})=>m?void 0:D.colors.primary600};
    }

    & > ${A.k} {
      background: ${({theme:D})=>D.colors.primary100};
    }

    [data-strapi-dropdown='true'] {
      background: ${({theme:D})=>D.colors.primary200};
    }
  }
`,L=({children:D,disabled:m=!1,error:M,expanded:R=!1,hasErrorMessage:g=!0,id:N,onToggle:Z,toggle:S,size:F="M",variant:w="primary",shadow:Q})=>{const z=(0,E.M)(N),$=i.useMemo(()=>({expanded:R,onToggle:Z,toggle:S,id:z,size:F,variant:w,disabled:m}),[m,R,z,Z,F,S,w]);return(0,e.jsxs)(l.S.Provider,{value:$,children:[(0,e.jsx)(B,{"data-strapi-expanded":R,disabled:m,"aria-disabled":m,expanded:R,hasRadius:!0,variant:w,error:M,shadow:Q,children:D}),M&&g&&(0,e.jsx)(c.x,{paddingTop:1,children:(0,e.jsx)(x.Z,{variant:"pi",textColor:"danger600",children:M})})]})}},63081:(h,v,t)=>{"use strict";t.d(v,{v:()=>l});var e=t(85893),i=t(13819),r=t(41580);const l=({children:c,...A})=>{const{expanded:E,id:x}=(0,i.A)();if(!E)return null;const P=`accordion-content-${x}`,O=`accordion-label-${x}`,B=`accordion-desc-${x}`;return(0,e.jsx)(r.x,{role:"region",id:P,"aria-labelledby":O,"aria-describedby":B,...A,children:c})}},13819:(h,v,t)=>{"use strict";t.d(v,{A:()=>r,S:()=>i});var e=t(67294);const i=(0,e.createContext)({disabled:!1,expanded:!1,id:"",size:"M",variant:"primary"}),r=()=>(0,e.useContext)(i)},74756:(h,v,t)=>{"use strict";t.d(v,{B:()=>D});var e=t(85893),i=t(12645),r=t(88972),l=t(48734),c=t(13819);const A=({expanded:m,disabled:M,variant:R})=>{let g="neutral100";return m?g="primary100":M?g="neutral150":R==="primary"&&(g="neutral0"),g};var E=t(11047),x=t(52624),P=t(39785),O=t(75515);const B=(0,r.ZP)(P.A)`
  text-align: left;

  // necessary to make the ellipsis prop work on the title
  > span {
    max-width: 100%;
  }

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:m,expanded:M})=>M?m.colors.primary600:m.colors.neutral500};
    }
  }
`,L=(0,r.ZP)(E.k)`
  min-height: ${({theme:m,size:M})=>m.sizes.accordions[M]};
  border-radius: ${({theme:m,expanded:M})=>M?`${m.borderRadius} ${m.borderRadius} 0 0`:m.borderRadius};

  &:hover {
    svg {
      path {
        fill: ${({theme:m})=>m.colors.primary600};
      }
    }
  }
`,D=({title:m,description:M,as:R="span",togglePosition:g="right",action:N,...Z})=>{const{onToggle:S,toggle:F,expanded:w,id:Q,size:z,variant:$,disabled:W}=(0,c.A)(),ge=`accordion-content-${Q}`,q=`accordion-label-${Q}`,pe=`accordion-desc-${Q}`,J=z==="M"?6:4,ae=z==="M"?J:J-2,Ee=A({expanded:w,disabled:W,variant:$}),he={as:R,fontWeight:z==="S"?"bold":void 0,id:q,textColor:w?"primary600":"neutral700",ellipsis:!0,variant:z==="M"?"delta":void 0},fe=w?"primary600":"neutral600",ve=w?"primary200":"neutral200",oe=z==="M"?`${32/16}rem`:`${24/16}rem`,se=()=>{W||(F&&!S?(console.warn('Deprecation warning: Usage of "toggle" prop in Accordion component is deprecated. This is discouraged and will be removed in the next major release. Please use "onToggle" instead'),F()):S&&S())},ie=(0,e.jsx)(E.k,{justifyContent:"center",borderRadius:"50%",height:oe,width:oe,transform:w?"rotate(180deg)":void 0,"data-strapi-dropdown":!0,"aria-hidden":!0,as:"span",background:ve,cursor:W?"not-allowed":"pointer",onClick:se,shrink:0,children:(0,e.jsx)(x.J,{as:i.Z,width:z==="M"?`${11/16}rem`:`${8/16}rem`,color:w?"primary600":"neutral600"})});return(0,e.jsx)(L,{paddingBottom:ae,paddingLeft:J,paddingRight:J,paddingTop:ae,background:Ee,expanded:w,size:z,justifyContent:"space-between",cursor:W?"not-allowed":"",children:(0,e.jsxs)(E.k,{gap:3,flex:1,maxWidth:"100%",children:[g==="left"&&ie,(0,e.jsx)(B,{onClick:se,"aria-disabled":W,"aria-expanded":w,"aria-controls":ge,"aria-labelledby":q,"data-strapi-accordion-toggle":!0,expanded:w,type:"button",flex:1,minWidth:0,...Z,children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(l.y,{...he,children:m}),M&&(0,e.jsx)(O.Z,{as:"p",id:pe,textColor:fe,children:M})]})}),g==="right"&&(0,e.jsxs)(E.k,{gap:3,children:[ie,N]}),g==="left"&&N]})})}},36989:(h,v,t)=>{"use strict";t.d(v,{Z:()=>x});var e=t(67294),i=t(45697),r=t(88972),l=t(41580),c=t(11047);const A=(0,r.ZP)(c.k)`
  & > * + * {
    margin-left: ${({theme:P})=>P.spaces[2]};
  }

  margin-left: ${({pullRight:P})=>P?"auto":void 0};
`,E=(0,r.ZP)(A)`
  flex-shrink: 0;
`,x=({startActions:P,endActions:O})=>P||O?e.createElement(l.x,{paddingLeft:10,paddingRight:10},e.createElement(l.x,{paddingBottom:4},e.createElement(c.k,{justifyContent:"space-between",alignItems:"flex-start"},P&&e.createElement(A,{wrap:"wrap"},P),O&&e.createElement(E,{pullRight:!0},O)))):null;x.defaultProps={endActions:void 0,startActions:void 0},x.propTypes={endActions:i.node,startActions:i.node}},49066:(h,v,t)=>{"use strict";t.d(v,{D:()=>l});var e=t(67294),i=t(45697),r=t(41580);const l=({children:c})=>e.createElement(r.x,{paddingLeft:10,paddingRight:10},c);l.propTypes={children:i.node.isRequired}},53979:(h,v,t)=>{"use strict";t.d(v,{T:()=>B});var e=t(67294),i=t(45697),r=t(88972),l=t(41580),c=t(11047);const A=m=>{const M=(0,e.useRef)(null),[R,g]=(0,e.useState)(!0),N=([Z])=>{g(Z.isIntersecting)};return(0,e.useEffect)(()=>{const Z=M.current,S=new IntersectionObserver(N,m);return Z&&S.observe(M.current),()=>{Z&&S.disconnect()}},[M,m]),[M,R]};var E=t(95355);const x=(m,M)=>{const R=(0,E.W)(M);(0,e.useLayoutEffect)(()=>{const g=new ResizeObserver(R);return Array.isArray(m)?m.forEach(N=>{N.current&&g.observe(N.current)}):m.current&&g.observe(m.current),()=>{g.disconnect()}},[m,R])};var P=t(75515);const O=()=>{const m=(0,e.useRef)(null),[M,R]=(0,e.useState)(null),[g,N]=A({root:null,rootMargin:"0px",threshold:0});return x(g,()=>{g.current&&R(g.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{m.current&&R(m.current.getBoundingClientRect())},[m]),{containerRef:g,isVisible:N,baseHeaderLayoutRef:m,headerSize:M}},B=m=>{const{containerRef:M,isVisible:R,baseHeaderLayoutRef:g,headerSize:N}=O();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:N?.height},ref:M},R&&e.createElement(D,{ref:g,...m})),!R&&e.createElement(D,{...m,sticky:!0,width:N?.width}))};B.displayName="HeaderLayout";const L=(0,r.ZP)(l.x)`
  width: ${m=>m.width}px;
`,D=e.forwardRef(({navigationAction:m,primaryAction:M,secondaryAction:R,subtitle:g,title:N,sticky:Z,width:S,...F},w)=>{const Q=typeof g=="string";return Z?e.createElement(L,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:S,zIndex:4,"data-strapi-header-sticky":!0},e.createElement(c.k,{justifyContent:"space-between"},e.createElement(c.k,null,m&&e.createElement(l.x,{paddingRight:3},m),e.createElement(l.x,null,e.createElement(P.Z,{variant:"beta",as:"h1",...F},N),Q?e.createElement(P.Z,{variant:"pi",textColor:"neutral600"},g):g),R?e.createElement(l.x,{paddingLeft:4},R):null),e.createElement(c.k,null,M?e.createElement(l.x,{paddingLeft:2},M):void 0))):e.createElement(l.x,{ref:w,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:m?6:8,background:"neutral100","data-strapi-header":!0},m?e.createElement(l.x,{paddingBottom:2},m):null,e.createElement(c.k,{justifyContent:"space-between"},e.createElement(c.k,{minWidth:0},e.createElement(P.Z,{as:"h1",variant:"alpha",...F},N),R?e.createElement(l.x,{paddingLeft:4},R):null),M),Q?e.createElement(P.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},g):g)});D.displayName="BaseHeaderLayout",D.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},D.propTypes={navigationAction:i.node,primaryAction:i.node,secondaryAction:i.node,sticky:i.bool,subtitle:i.oneOfType([i.string,i.node]),title:i.string.isRequired,width:i.number},B.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},B.propTypes={navigationAction:i.node,primaryAction:i.node,secondaryAction:i.node,subtitle:i.oneOfType([i.string,i.node]),title:i.string.isRequired}},17034:(h,v,t)=>{"use strict";t.d(v,{A:()=>E});var e=t(67294),i=t(45697),r=t(88972),l=t(41580);const c=(0,r.ZP)(l.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:x})=>x?"auto 1fr":"1fr"};
`,A=(0,r.ZP)(l.x)`
  overflow-x: hidden;
`,E=({sideNav:x,children:P})=>e.createElement(c,{hasSideNav:Boolean(x)},x,e.createElement(A,{paddingBottom:10},P));E.defaultProps={sideNav:void 0},E.propTypes={children:i.node.isRequired,sideNav:i.node}},185:(h,v,t)=>{"use strict";t.d(v,{o:()=>c});var e=t(67294),i=t(45697),r=t(88972);const l=r.ZP.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,c=({labelledBy:A,...E})=>{const x=A||"main-content-title";return e.createElement(l,{"aria-labelledby":x,id:"main-content",tabIndex:-1,...E})};c.defaultProps={labelledBy:void 0},c.propTypes={labelledBy:i.string}},67109:(h,v,t)=>{"use strict";t.d(v,{Z:()=>r});var e=t(85893);const i=l=>(0,e.jsx)("svg",{width:"1rem",height:"1rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...l,children:(0,e.jsx)("path",{d:"M24 13.3a.2.2 0 0 1-.2.2H5.74l8.239 8.239a.2.2 0 0 1 0 .282L12.14 23.86a.2.2 0 0 1-.282 0L.14 12.14a.2.2 0 0 1 0-.282L11.86.14a.2.2 0 0 1 .282 0L13.98 1.98a.2.2 0 0 1 0 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6Z",fill:"#212134"})}),r=i},78114:(h,v,t)=>{"use strict";t.d(v,{Z:()=>r});var e=t(85893);const i=l=>(0,e.jsx)("svg",{width:"1rem",height:"1rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...l,children:(0,e.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.68 9.192c-.6.276-2.114 1.18-2.306 1.303a.792.792 0 0 0-.374.68v1.65a.797.797 0 0 0 .384.687c.254.16 1.73 1.042 2.306 1.303l.744 1.8c-.24.634-.67 2.333-.72 2.554a.797.797 0 0 0 .216.744l1.167 1.166a.801.801 0 0 0 .744.216l.03-.008c.36-.092 1.946-.498 2.523-.712l1.8.744c.276.6 1.181 2.115 1.304 2.307a.805.805 0 0 0 .679.374h1.649a.797.797 0 0 0 .686-.384c.16-.254 1.042-1.73 1.303-2.306l1.8-.744c.634.24 2.333.67 2.554.72a.797.797 0 0 0 .744-.216l1.166-1.167a.803.803 0 0 0 .216-.744l-.008-.03c-.092-.36-.498-1.946-.712-2.523l.744-1.8c.6-.276 2.115-1.181 2.307-1.304a.804.804 0 0 0 .374-.679v-1.649a.796.796 0 0 0-.382-.679c-.254-.16-1.73-1.041-2.306-1.303l-.744-1.8c.24-.634.67-2.333.72-2.554a.796.796 0 0 0-.216-.744l-1.166-1.173a.802.802 0 0 0-.744-.216l-.03.008c-.361.092-1.947.498-2.524.712l-1.8-.744c-.276-.6-1.18-2.115-1.303-2.307a.803.803 0 0 0-.68-.374h-1.65a.797.797 0 0 0-.68.382c-.16.254-1.041 1.73-1.303 2.306l-1.8.744c-.634-.24-2.333-.67-2.554-.72a.797.797 0 0 0-.744.216L2.921 4.094a.802.802 0 0 0-.216.744l.008.03c.092.361.498 1.947.712 2.524l-.744 1.8ZM12 17a5 5 0 1 0 0-10 5 5 0 0 0 0 10Z",fill:"#212134"})}),r=i}}]);
